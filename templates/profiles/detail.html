{% extends "base.html" %}
{% block container %}
    <div class="container mt-4 prof__cont">
        <div class="card">
            <div class="card-header">
                <h5 class="profile__subtitle text-h1">Профиль пользователя</h5>
            </div>
            <div class="card-body">
                <dl class="row">
                    <!-- <dt class="col-sm-3">ФИО</dt>
                    <dd class="col-sm-9">{{ profile.surname }} {{ profile.name }} {{ profile.patronymic|default_if_none:"" }}</dd>
                    <dt class="col-sm-3">О себе</dt>
                    <dd class="col-sm-9">{{ profile.bio|default_if_none:"&#10060" }}</dd>
                    <dt class="col-sm-3">Сотрудник</dt>
                    {% if is_profile_staff %}
                        <dd class="col-sm-9">Да</dd>
                    {% else %}
                        <dd class="col-sm-9">Нет</dd>
                    {% endif %}
                    {% if profile.photo %}
                        <dt class="col-sm-3">Фото</dt>
                        <dd class="col-sm-9">
                            <img src="{{ profile.photo.url }}" alt="Фото не загружено" height="200">
                        </dd>
                    {% endif %} -->
                    <!-- {% if profile.id == user.profile.id or user.is_superuser %}
                        <a href="{% url 'profile-update' profile.id %}" class="btn btn-primary">Редактировать</a>
                    {% else %}
                        <a class="btn btn-primary disabled">Редактировать</a>
                    {% endif %}
                    {% if profile.id == user.profile.id %}
                        <a href="{% url 'logout' %}" class="btn btn-danger">Выйти</a>
                        <a href="{% url 'password_change' %}" class="btn btn-warning">Смена пароля</a>
                    {% endif %} -->
                </dl>
            </div>
        </div>

    </div>

    <div class="profile__container">
      <div class="profile__flex">
          {% if profile.photo %}
            <img class="profile__img" src="{{ profile.photo.url }}" alt="Profile image">
          {% endif %}
          <div class="profile__left-flex">
              <div class="profile__content">
                  <div class="profile__subtitle text-p">Имя</div>
                  <div class="profile__text text-h2">{{ profile.name|default_if_none:"Не указано" }}</div>
              </div>
              <div class="profile__content">
                <div class="profile__subtitle text-p">Фамилия</div>
                <div class="profile__text text-h2">{{ profile.surname|default_if_none:"Не указано" }}</div>
            </div>
              <div class="profile__content">
                  <div class="profile__subtitle text-p">Отчество</div>
                  <div class="profile__text text-h2">{{ profile.patronymic|default_if_none:"Не указано" }}</div>
              </div>
          </div>
          <div class="profile__right-flex">
              <div class="profile__content">
                  <div class="profile__subtitle text-p">Контакты</div>
                  <div class="profile__text text-h2">{{ profile.communication|default_if_none:"Не указано" }}</div>
              </div>
              <div class="profile__content">
                  <div class="profile__subtitle text-p">Должность</div>
                  <div class="profile__text text-h2">{{ profile.post|default_if_none:"Не указано" }}</div>
              </div>
              <div class="profile__content">
                  <div class="profile__subtitle text-p">Пройдено курсов</div>
                  <div class="profile__text text-h2">10</div>
              </div>
          </div>   
      </div>
    <div class="certificate">
      <div class="profile__subtitle text-p">Сертификаты</div>
    </div>
      {% for certificate in certificates %}
      <div class="certificate">         
        <a href="{% url 'download_document' pk=certificate.pk %}" class="certificate__flex">
            <div class="certificate__info">
            <svg class="certificate__img" width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_398_424)">
                <path d="M7.5 34H28.5C29.327 34 30 33.327 30 32.5V11.5C30 11.483 29.992 11.469 29.991 11.453C29.989 11.43 29.983 11.41 29.978 11.388C29.9623 11.3185 29.9316 11.2533 29.888 11.197C29.881 11.188 29.882 11.177 29.875 11.168L21.875 2.168C21.872 2.165 21.868 2.165 21.865 2.162C21.804 2.09821 21.727 2.05194 21.642 2.028C21.623 2.022 21.606 2.02 21.586 2.017C21.557 2.012 21.53 2 21.5 2H7.5C6.673 2 6 2.673 6 3.5V32.5C6 33.327 6.673 34 7.5 34ZM22 3.815L28.387 11H22.5C22.28 11 22 10.58 22 10.25V3.815ZM7 3.5C7 3.36739 7.05268 3.24021 7.14645 3.14645C7.24021 3.05268 7.36739 3 7.5 3H21V10.25C21 11.059 21.655 12 22.5 12H29V32.5C29 32.6326 28.9473 32.7598 28.8536 32.8536C28.7598 32.9473 28.6326 33 28.5 33H7.5C7.22 33 7 32.78 7 32.5V3.5Z" fill="#028894"/>
                <path d="M11.5 16H24.5C24.6326 16 24.7598 15.9473 24.8536 15.8536C24.9473 15.7598 25 15.6326 25 15.5C25 15.3674 24.9473 15.2402 24.8536 15.1464C24.7598 15.0527 24.6326 15 24.5 15H11.5C11.3674 15 11.2402 15.0527 11.1464 15.1464C11.0527 15.2402 11 15.3674 11 15.5C11 15.6326 11.0527 15.7598 11.1464 15.8536C11.2402 15.9473 11.3674 16 11.5 16ZM11.5 20H24.5C24.6326 20 24.7598 19.9473 24.8536 19.8536C24.9473 19.7598 25 19.6326 25 19.5C25 19.3674 24.9473 19.2402 24.8536 19.1464C24.7598 19.0527 24.6326 19 24.5 19H11.5C11.3674 19 11.2402 19.0527 11.1464 19.1464C11.0527 19.2402 11 19.3674 11 19.5C11 19.6326 11.0527 19.7598 11.1464 19.8536C11.2402 19.9473 11.3674 20 11.5 20ZM11.5 12H17.5C17.6326 12 17.7598 11.9473 17.8536 11.8536C17.9473 11.7598 18 11.6326 18 11.5C18 11.3674 17.9473 11.2402 17.8536 11.1464C17.7598 11.0527 17.6326 11 17.5 11H11.5C11.3674 11 11.2402 11.0527 11.1464 11.1464C11.0527 11.2402 11 11.3674 11 11.5C11 11.6326 11.0527 11.7598 11.1464 11.8536C11.2402 11.9473 11.3674 12 11.5 12ZM11.5 24H24.5C24.6326 24 24.7598 23.9473 24.8536 23.8536C24.9473 23.7598 25 23.6326 25 23.5C25 23.3674 24.9473 23.2402 24.8536 23.1464C24.7598 23.0527 24.6326 23 24.5 23H11.5C11.3674 23 11.2402 23.0527 11.1464 23.1464C11.0527 23.2402 11 23.3674 11 23.5C11 23.6326 11.0527 23.7598 11.1464 23.8536C11.2402 23.9473 11.3674 24 11.5 24ZM11.5 28H24.5C24.6326 28 24.7598 27.9473 24.8536 27.8536C24.9473 27.7598 25 27.6326 25 27.5C25 27.3674 24.9473 27.2402 24.8536 27.1464C24.7598 27.0527 24.6326 27 24.5 27H11.5C11.3674 27 11.2402 27.0527 11.1464 27.1464C11.0527 27.2402 11 27.3674 11 27.5C11 27.6326 11.0527 27.7598 11.1464 27.8536C11.2402 27.9473 11.3674 28 11.5 28Z" fill="#028894"/>
                </g>
                <defs>
                <clipPath id="clip0_398_424">
                <rect width="24" height="32" fill="white" transform="translate(6 2)"/>
                </clipPath>
                </defs>
                </svg>
            
                <div class="certificate__name">
                    <h3 class="certificate__title text-h2">{{ certificate.demand.course.name }}</h3>
                    <p class="certificate__desc text-p">{{ certificate.demand.name }}</p>
                </div>
            </div>
                <svg class="arrow__down" width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.8141 23.8952L30.7616 11.3559C30.961 11.1467 31.0723 10.8687 31.0723 10.5797C31.0723 10.2906 30.961 10.0126 30.7616 9.80342L30.7481 9.78991C30.6514 9.68814 30.535 9.60709 30.406 9.55171C30.277 9.49633 30.1381 9.46777 29.9977 9.46777C29.8573 9.46777 29.7184 9.49633 29.5894 9.55171C29.4604 9.60709 29.344 9.68814 29.2473 9.78991L17.9973 21.5979L6.7518 9.78991C6.65511 9.68813 6.53873 9.60709 6.40973 9.55171C6.28073 9.49633 6.14181 9.46777 6.00143 9.46777C5.86104 9.46777 5.72213 9.49633 5.59313 9.55171C5.46413 9.60709 5.34774 9.68813 5.25105 9.78991L5.23755 9.80341C5.0381 10.0126 4.92684 10.2906 4.92684 10.5797C4.92684 10.8687 5.0381 11.1467 5.23755 11.3559L17.1851 23.8952C17.2901 24.0054 17.4165 24.0932 17.5565 24.1532C17.6965 24.2132 17.8472 24.2441 17.9996 24.2441C18.1519 24.2441 18.3026 24.2132 18.4426 24.1532C18.5826 24.0932 18.709 24.0054 18.8141 23.8952Z" fill="#028894"/>
                </svg>
        </a>
      </div>
      {% endfor %}

      <div class="profile__btns">
        {% if profile.id == user.profile.id or user.is_superuser %}
        <a href="{% url 'profile-update' profile.id %}" class="profile__btn text-p">Редактировать</a>
        {% endif %}
        {% if profile.id == user.profile.id %}
        <a href="{% url 'password_change' %}" class="profile__btn text-p">Смена пароля</a>
{#            <a href="{% url 'logout' %}" class="profile__btn text-p">Выйти</a>#}
        <form class="logout__form" method="post" action="{% url 'logout' %}">
        {% csrf_token %}
            <button type="submit" class="profile__btn text-p">Выйти</button>
        </form>
        {% endif %}
      </div>
      
    </div>

{% endblock %}